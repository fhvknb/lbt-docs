"use strict";(self.webpackChunklbt_docs=self.webpackChunklbt_docs||[]).push([[4245],{28453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>d});var i=s(96540);const l={},c=i.createContext(l);function r(n){const e=i.useContext(c);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),i.createElement(c.Provider,{value:e},n.children)}},65344:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"FrontEnd/webpack/\u524d\u7aef\u9759\u6001\u8d44\u6e90CDN\u52a0\u901f\u4f18\u5316","title":"\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee\u7684 CDN \u52a0\u901f\u4f18\u5316\u7b56\u7565","description":"\u4e00\u3001CDN \u57fa\u7840\u914d\u7f6e","source":"@site/docs/FrontEnd/webpack/\u524d\u7aef\u9759\u6001\u8d44\u6e90CDN\u52a0\u901f\u4f18\u5316.md","sourceDirName":"FrontEnd/webpack","slug":"/FrontEnd/webpack/\u524d\u7aef\u9759\u6001\u8d44\u6e90CDN\u52a0\u901f\u4f18\u5316","permalink":"/docs/FrontEnd/webpack/\u524d\u7aef\u9759\u6001\u8d44\u6e90CDN\u52a0\u901f\u4f18\u5316","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"tag":["webpack"]},"sidebar":"tutorialSidebar","previous":{"title":"RN Tips","permalink":"/docs/FrontEnd/reactnative/RNTips"},"next":{"title":"Webpack/Vite \u6253\u5305\u4f18\u5316\u7b56\u7565\u5168\u6307\u5357","permalink":"/docs/FrontEnd/webpack/\u6253\u5305\u6027\u80fd\u4f18\u5316"}}');var l=s(74848),c=s(28453);const r={tag:["webpack"]},d="\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee\u7684 CDN \u52a0\u901f\u4f18\u5316\u7b56\u7565",t={},a=[{value:"\u4e00\u3001CDN \u57fa\u7840\u914d\u7f6e",id:"\u4e00cdn-\u57fa\u7840\u914d\u7f6e",level:2},{value:"1. \u9009\u62e9\u5408\u9002\u7684 CDN \u670d\u52a1",id:"1-\u9009\u62e9\u5408\u9002\u7684-cdn-\u670d\u52a1",level:3},{value:"2. \u914d\u7f6e CDN \u57df\u540d",id:"2-\u914d\u7f6e-cdn-\u57df\u540d",level:3},{value:"\u4e8c\u3001\u524d\u7aef\u6784\u5efa\u914d\u7f6e",id:"\u4e8c\u524d\u7aef\u6784\u5efa\u914d\u7f6e",level:2},{value:"1. Webpack \u914d\u7f6e",id:"1-webpack-\u914d\u7f6e",level:3},{value:"2. Vite \u914d\u7f6e",id:"2-vite-\u914d\u7f6e",level:3},{value:"\u4e09\u3001\u8d44\u6e90\u4e0a\u4f20\u5230 CDN",id:"\u4e09\u8d44\u6e90\u4e0a\u4f20\u5230-cdn",level:2},{value:"1. \u624b\u52a8\u4e0a\u4f20",id:"1-\u624b\u52a8\u4e0a\u4f20",level:3},{value:"2. \u81ea\u52a8\u5316\u90e8\u7f72",id:"2-\u81ea\u52a8\u5316\u90e8\u7f72",level:3},{value:"\u4f7f\u7528 Webpack \u63d2\u4ef6",id:"\u4f7f\u7528-webpack-\u63d2\u4ef6",level:4},{value:"\u4f7f\u7528 Vite \u63d2\u4ef6",id:"\u4f7f\u7528-vite-\u63d2\u4ef6",level:4},{value:"\u4f7f\u7528 CI/CD \u6d41\u7a0b",id:"\u4f7f\u7528-cicd-\u6d41\u7a0b",level:4},{value:"\u56db\u3001\u9ad8\u7ea7\u4f18\u5316\u7b56\u7565",id:"\u56db\u9ad8\u7ea7\u4f18\u5316\u7b56\u7565",level:2},{value:"1. \u5185\u5bb9\u5206\u53d1\u4f18\u5316",id:"1-\u5185\u5bb9\u5206\u53d1\u4f18\u5316",level:3},{value:"\u8d44\u6e90\u5206\u7ec4\u4e0e\u5206\u57df\u540d",id:"\u8d44\u6e90\u5206\u7ec4\u4e0e\u5206\u57df\u540d",level:4},{value:"2. \u7f13\u5b58\u7b56\u7565\u4f18\u5316",id:"2-\u7f13\u5b58\u7b56\u7565\u4f18\u5316",level:3},{value:"\u914d\u7f6e\u5408\u7406\u7684\u7f13\u5b58\u65f6\u95f4",id:"\u914d\u7f6e\u5408\u7406\u7684\u7f13\u5b58\u65f6\u95f4",level:4},{value:"\u914d\u7f6e\u7f13\u5b58\u63a7\u5236\u5934",id:"\u914d\u7f6e\u7f13\u5b58\u63a7\u5236\u5934",level:4},{value:"3. \u9884\u52a0\u8f7d\u548c\u9884\u8fde\u63a5\u4f18\u5316",id:"3-\u9884\u52a0\u8f7d\u548c\u9884\u8fde\u63a5\u4f18\u5316",level:3},{value:"4. \u56fe\u7247\u4f18\u5316",id:"4-\u56fe\u7247\u4f18\u5316",level:3},{value:"\u54cd\u5e94\u5f0f\u56fe\u7247",id:"\u54cd\u5e94\u5f0f\u56fe\u7247",level:4},{value:"\u56fe\u7247\u683c\u5f0f\u4f18\u5316",id:"\u56fe\u7247\u683c\u5f0f\u4f18\u5316",level:4},{value:"5. \u7b2c\u4e09\u65b9\u5e93\u4f18\u5316",id:"5-\u7b2c\u4e09\u65b9\u5e93\u4f18\u5316",level:3},{value:"\u4f7f\u7528\u516c\u5171 CDN",id:"\u4f7f\u7528\u516c\u5171-cdn",level:4},{value:"\u4e94\u3001\u76d1\u63a7\u4e0e\u5206\u6790",id:"\u4e94\u76d1\u63a7\u4e0e\u5206\u6790",level:2},{value:"1. CDN \u6027\u80fd\u76d1\u63a7",id:"1-cdn-\u6027\u80fd\u76d1\u63a7",level:3},{value:"2. \u524d\u7aef\u6027\u80fd\u76d1\u63a7",id:"2-\u524d\u7aef\u6027\u80fd\u76d1\u63a7",level:3},{value:"\u516d\u3001\u5e38\u89c1\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848",id:"\u516d\u5e38\u89c1\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848",level:2},{value:"1. \u8de8\u57df\u95ee\u9898",id:"1-\u8de8\u57df\u95ee\u9898",level:3},{value:"2. \u7f13\u5b58\u66f4\u65b0\u95ee\u9898",id:"2-\u7f13\u5b58\u66f4\u65b0\u95ee\u9898",level:3},{value:"3. \u90e8\u7f72\u540c\u6b65\u95ee\u9898",id:"3-\u90e8\u7f72\u540c\u6b65\u95ee\u9898",level:3},{value:"\u4e03\u3001\u5b8c\u6574\u5b9e\u65bd\u6d41\u7a0b\u793a\u4f8b",id:"\u4e03\u5b8c\u6574\u5b9e\u65bd\u6d41\u7a0b\u793a\u4f8b",level:2},{value:"1. \u9879\u76ee\u914d\u7f6e\u793a\u4f8b",id:"1-\u9879\u76ee\u914d\u7f6e\u793a\u4f8b",level:3},{value:"2. \u90e8\u7f72\u811a\u672c\u793a\u4f8b",id:"2-\u90e8\u7f72\u811a\u672c\u793a\u4f8b",level:3},{value:"3. \u524d\u7aef\u5f15\u7528\u793a\u4f8b",id:"3-\u524d\u7aef\u5f15\u7528\u793a\u4f8b",level:3}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee\u7684-cdn-\u52a0\u901f\u4f18\u5316\u7b56\u7565",children:"\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee\u7684 CDN \u52a0\u901f\u4f18\u5316\u7b56\u7565"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4e00cdn-\u57fa\u7840\u914d\u7f6e",children:"\u4e00\u3001CDN \u57fa\u7840\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u9009\u62e9\u5408\u9002\u7684-cdn-\u670d\u52a1",children:"1. \u9009\u62e9\u5408\u9002\u7684 CDN \u670d\u52a1"}),"\n",(0,l.jsx)(e.p,{children:"\u6839\u636e\u9879\u76ee\u9700\u6c42\u548c\u9884\u7b97\u9009\u62e9\u5408\u9002\u7684 CDN \u670d\u52a1\u63d0\u4f9b\u5546\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u56fd\u9645"}),": Cloudflare, Akamai, AWS CloudFront, Fastly"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u56fd\u5185"}),": \u963f\u91cc\u4e91 CDN, \u817e\u8baf\u4e91 CDN, \u4e03\u725b\u4e91, \u53c8\u62cd\u4e91, \u767e\u5ea6\u4e91\u52a0\u901f"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"2-\u914d\u7f6e-cdn-\u57df\u540d",children:"2. \u914d\u7f6e CDN \u57df\u540d"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5728 CDN \u670d\u52a1\u5546\u5e73\u53f0\u521b\u5efa\u52a0\u901f\u57df\u540d\uff08\u5982 ",(0,l.jsx)(e.code,{children:"static.yourdomain.com"}),"\uff09"]}),"\n",(0,l.jsx)(e.li,{children:"\u914d\u7f6e\u6e90\u7ad9\u4fe1\u606f\uff08\u6307\u5411\u4f60\u7684\u6e90\u670d\u52a1\u5668\u6216\u5bf9\u8c61\u5b58\u50a8\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u914d\u7f6e CNAME \u8bb0\u5f55\uff0c\u5c06\u52a0\u901f\u57df\u540d\u6307\u5411 CDN \u670d\u52a1\u5546\u63d0\u4f9b\u7684\u57df\u540d"}),"\n",(0,l.jsx)(e.li,{children:"\u914d\u7f6e HTTPS \u8bc1\u4e66\uff08\u5f3a\u70c8\u63a8\u8350\uff09"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4e8c\u524d\u7aef\u6784\u5efa\u914d\u7f6e",children:"\u4e8c\u3001\u524d\u7aef\u6784\u5efa\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"1-webpack-\u914d\u7f6e",children:"1. Webpack \u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// webpack.config.js\nconst isProd = process.env.NODE_ENV === 'production';\nconst CDN_URL = isProd ? 'https://static.yourdomain.com/' : '/';\n\nmodule.exports = {\n  output: {\n    filename: 'js/[name].[contenthash:8].js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: CDN_URL, // \u5173\u952e\u914d\u7f6e\uff1a\u8d44\u6e90\u7684\u57fa\u7840\u8def\u5f84\n  },\n  // \u56fe\u7247\u3001\u5b57\u4f53\u7b49\u8d44\u6e90\u914d\u7f6e\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|gif|svg)$/i,\n        type: 'asset',\n        generator: {\n          filename: 'images/[name].[hash:8][ext]',\n        },\n      },\n      {\n        test: /\\.(woff|woff2|eot|ttf|otf)$/i,\n        type: 'asset/resource',\n        generator: {\n          filename: 'fonts/[name].[hash:8][ext]',\n        },\n      },\n    ],\n  },\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-vite-\u914d\u7f6e",children:"2. Vite \u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// vite.config.js\nexport default defineConfig(({ command, mode }) => {\n  const isProd = mode === 'production';\n  const CDN_URL = isProd ? 'https://static.yourdomain.com/' : '/';\n  \n  return {\n    base: CDN_URL, // \u516c\u5171\u57fa\u7840\u8def\u5f84\n    build: {\n      rollupOptions: {\n        output: {\n          // \u81ea\u5b9a\u4e49\u6784\u5efa\u8f93\u51fa\n          chunkFileNames: 'js/[name]-[hash].js',\n          entryFileNames: 'js/[name]-[hash].js',\n          assetFileNames: ({name}) => {\n            if (/\\.(gif|jpe?g|png|svg)$/.test(name)) {\n              return 'images/[name]-[hash][extname]';\n            }\n            if (/\\.(woff2?|ttf|eot)$/.test(name)) {\n              return 'fonts/[name]-[hash][extname]';\n            }\n            return 'assets/[name]-[hash][extname]';\n          },\n        },\n      },\n    },\n  };\n});\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4e09\u8d44\u6e90\u4e0a\u4f20\u5230-cdn",children:"\u4e09\u3001\u8d44\u6e90\u4e0a\u4f20\u5230 CDN"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u624b\u52a8\u4e0a\u4f20",children:"1. \u624b\u52a8\u4e0a\u4f20"}),"\n",(0,l.jsxs)(e.p,{children:["\u6784\u5efa\u5b8c\u6210\u540e\uff0c\u5c06 ",(0,l.jsx)(e.code,{children:"dist"})," \u6216 ",(0,l.jsx)(e.code,{children:"build"})," \u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4e0a\u4f20\u5230 CDN \u6e90\u7ad9\uff08\u5982\u5bf9\u8c61\u5b58\u50a8\uff09\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"2-\u81ea\u52a8\u5316\u90e8\u7f72",children:"2. \u81ea\u52a8\u5316\u90e8\u7f72"}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528-webpack-\u63d2\u4ef6",children:"\u4f7f\u7528 Webpack \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// webpack.config.js\nconst WebpackCdnUploadPlugin = require('webpack-cdn-upload-plugin');\n\nmodule.exports = {\n  // ... \u5176\u4ed6\u914d\u7f6e\n  plugins: [\n    new WebpackCdnUploadPlugin({\n      uploadOptions: {\n        provider: 'aws-s3', // \u6216\u5176\u4ed6\u652f\u6301\u7684\u63d0\u4f9b\u5546\n        region: 'your-region',\n        bucket: 'your-bucket',\n        accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,\n        prefix: 'static/', // \u53ef\u9009\u524d\u7f00\n      },\n      // \u53ef\u9009\uff1a\u4e0a\u4f20\u5b8c\u6210\u540e\u7684\u56de\u8c03\n      onFinish: (uploadedFiles) => {\n        console.log('Files uploaded:', uploadedFiles.length);\n      },\n    }),\n  ],\n};\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528-vite-\u63d2\u4ef6",children:"\u4f7f\u7528 Vite \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// vite.config.js\nimport { viteStaticCopy } from 'vite-plugin-static-copy';\nimport { cdnUpload } from 'vite-plugin-cdn-upload'; // \u5047\u8bbe\u7684\u63d2\u4ef6\n\nexport default defineConfig({\n  // ... \u5176\u4ed6\u914d\u7f6e\n  plugins: [\n    cdnUpload({\n      provider: 'aliyun-oss', // \u6216\u5176\u4ed6\u652f\u6301\u7684\u63d0\u4f9b\u5546\n      region: 'your-region',\n      bucket: 'your-bucket',\n      accessKeyId: process.env.OSS_ACCESS_KEY_ID,\n      accessKeySecret: process.env.OSS_ACCESS_KEY_SECRET,\n      prefix: 'static/',\n    }),\n  ],\n});\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528-cicd-\u6d41\u7a0b",children:"\u4f7f\u7528 CI/CD \u6d41\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# .gitlab-ci.yml \u793a\u4f8b\nstages:\n  - build\n  - deploy\n\nbuild:\n  stage: build\n  script:\n    - npm install\n    - npm run build\n  artifacts:\n    paths:\n      - dist/\n\ndeploy_to_cdn:\n  stage: deploy\n  script:\n    - pip install awscli\n    - aws s3 sync ./dist s3://your-bucket/static/ --delete\n  only:\n    - master\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u56db\u9ad8\u7ea7\u4f18\u5316\u7b56\u7565",children:"\u56db\u3001\u9ad8\u7ea7\u4f18\u5316\u7b56\u7565"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u5185\u5bb9\u5206\u53d1\u4f18\u5316",children:"1. \u5185\u5bb9\u5206\u53d1\u4f18\u5316"}),"\n",(0,l.jsx)(e.h4,{id:"\u8d44\u6e90\u5206\u7ec4\u4e0e\u5206\u57df\u540d",children:"\u8d44\u6e90\u5206\u7ec4\u4e0e\u5206\u57df\u540d"}),"\n",(0,l.jsx)(e.p,{children:"\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u6e90\u5206\u914d\u5230\u4e0d\u540c\u7684 CDN \u57df\u540d\uff0c\u4ee5\u63d0\u9ad8\u5e76\u884c\u4e0b\u8f7d\u6548\u7387\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// webpack.config.js\nmodule.exports = {\n  output: {\n    filename: 'js/[name].[contenthash:8].js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: 'https://js.yourdomain.com/',\n  },\n  // \u4f7f\u7528\u63d2\u4ef6\u4e3a\u4e0d\u540c\u8d44\u6e90\u7c7b\u578b\u8bbe\u7f6e\u4e0d\u540c\u7684 CDN \u57df\u540d\n  plugins: [\n    new webpack.DefinePlugin({\n      'process.env.IMAGE_CDN': JSON.stringify('https://img.yourdomain.com/'),\n      'process.env.FONT_CDN': JSON.stringify('https://font.yourdomain.com/'),\n    }),\n  ],\n};\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u7136\u540e\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// \u56fe\u7247\u8def\u5f84\nconst imgUrl = `${process.env.IMAGE_CDN}images/logo.png`;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u7f13\u5b58\u7b56\u7565\u4f18\u5316",children:"2. \u7f13\u5b58\u7b56\u7565\u4f18\u5316"}),"\n",(0,l.jsx)(e.h4,{id:"\u914d\u7f6e\u5408\u7406\u7684\u7f13\u5b58\u65f6\u95f4",children:"\u914d\u7f6e\u5408\u7406\u7684\u7f13\u5b58\u65f6\u95f4"}),"\n",(0,l.jsx)(e.p,{children:"\u5728 CDN \u5e73\u53f0\u914d\u7f6e\u4e0d\u540c\u8d44\u6e90\u7c7b\u578b\u7684\u7f13\u5b58\u65f6\u95f4\uff1a"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u8d44\u6e90\u7c7b\u578b"}),(0,l.jsx)(e.th,{children:"\u7f13\u5b58\u65f6\u95f4"}),(0,l.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"HTML"}),(0,l.jsx)(e.td,{children:"\u77ed\u671f\u6216\u4e0d\u7f13\u5b58"}),(0,l.jsx)(e.td,{children:"\u786e\u4fdd\u5185\u5bb9\u66f4\u65b0\u53ca\u65f6\u53ef\u89c1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"JS/CSS (\u5e26\u54c8\u5e0c)"}),(0,l.jsx)(e.td,{children:"1\u5e74"}),(0,l.jsx)(e.td,{children:"\u5185\u5bb9\u53d8\u5316\u65f6\u6587\u4ef6\u540d\u4f1a\u6539\u53d8"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u56fe\u7247/\u5b57\u4f53"}),(0,l.jsx)(e.td,{children:"1\u5e74"}),(0,l.jsx)(e.td,{children:"\u9759\u6001\u8d44\u6e90\u5f88\u5c11\u53d8\u5316"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u52a8\u6001API\u54cd\u5e94"}),(0,l.jsx)(e.td,{children:"\u6309\u9700\u914d\u7f6e"}),(0,l.jsx)(e.td,{children:"\u6839\u636eAPI\u7279\u6027\u51b3\u5b9a"})]})]})]}),"\n",(0,l.jsx)(e.h4,{id:"\u914d\u7f6e\u7f13\u5b58\u63a7\u5236\u5934",children:"\u914d\u7f6e\u7f13\u5b58\u63a7\u5236\u5934"}),"\n",(0,l.jsx)(e.p,{children:"\u5728 CDN \u5e73\u53f0\u914d\u7f6e\u9002\u5f53\u7684 HTTP \u5934\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Cache-Control: max-age=31536000, immutable\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u9884\u52a0\u8f7d\u548c\u9884\u8fde\u63a5\u4f18\u5316",children:"3. \u9884\u52a0\u8f7d\u548c\u9884\u8fde\u63a5\u4f18\u5316"}),"\n",(0,l.jsx)(e.p,{children:"\u5728 HTML \u4e2d\u6dfb\u52a0\u8d44\u6e90\u63d0\u793a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-html",children:'\x3c!-- DNS \u9884\u89e3\u6790 --\x3e\n<link rel="dns-prefetch" href="https://static.yourdomain.com">\n\n\x3c!-- \u9884\u8fde\u63a5 --\x3e\n<link rel="preconnect" href="https://static.yourdomain.com" crossorigin>\n\n\x3c!-- \u9884\u52a0\u8f7d\u5173\u952e\u8d44\u6e90 --\x3e\n<link rel="preload" href="https://static.yourdomain.com/js/main.123456.js" as="script">\n<link rel="preload" href="https://static.yourdomain.com/css/main.123456.css" as="style">\n'})}),"\n",(0,l.jsx)(e.h3,{id:"4-\u56fe\u7247\u4f18\u5316",children:"4. \u56fe\u7247\u4f18\u5316"}),"\n",(0,l.jsx)(e.h4,{id:"\u54cd\u5e94\u5f0f\u56fe\u7247",children:"\u54cd\u5e94\u5f0f\u56fe\u7247"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-html",children:'<picture>\n  <source media="(max-width: 768px)" srcset="https://img.yourdomain.com/small.jpg">\n  <source media="(min-width: 769px)" srcset="https://img.yourdomain.com/large.jpg">\n  <img src="https://img.yourdomain.com/fallback.jpg" alt="\u63cf\u8ff0">\n</picture>\n'})}),"\n",(0,l.jsx)(e.h4,{id:"\u56fe\u7247\u683c\u5f0f\u4f18\u5316",children:"\u56fe\u7247\u683c\u5f0f\u4f18\u5316"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528 WebP \u6216 AVIF \u683c\u5f0f\uff0c\u5e76\u63d0\u4f9b\u56de\u9000\u65b9\u6848\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-html",children:'<picture>\n  <source type="image/avif" srcset="https://img.yourdomain.com/image.avif">\n  <source type="image/webp" srcset="https://img.yourdomain.com/image.webp">\n  <img src="https://img.yourdomain.com/image.jpg" alt="\u63cf\u8ff0">\n</picture>\n'})}),"\n",(0,l.jsx)(e.h3,{id:"5-\u7b2c\u4e09\u65b9\u5e93\u4f18\u5316",children:"5. \u7b2c\u4e09\u65b9\u5e93\u4f18\u5316"}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528\u516c\u5171-cdn",children:"\u4f7f\u7528\u516c\u5171 CDN"}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u4e8e\u5e38\u7528\u5e93\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u516c\u5171 CDN\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-html",children:'\x3c!-- \u4f7f\u7528\u516c\u5171 CDN --\x3e\n<script src="https://cdn.jsdelivr.net/npm/vue@3.2.31/dist/vue.global.prod.js"><\/script>\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u5728 Webpack \u4e2d\u914d\u7f6e\u5916\u90e8\u4f9d\u8d56\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// webpack.config.js\nmodule.exports = {\n  // ... \u5176\u4ed6\u914d\u7f6e\n  externals: {\n    'vue': 'Vue',\n    'react': 'React',\n    'react-dom': 'ReactDOM',\n  },\n};\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4e94\u76d1\u63a7\u4e0e\u5206\u6790",children:"\u4e94\u3001\u76d1\u63a7\u4e0e\u5206\u6790"}),"\n",(0,l.jsx)(e.h3,{id:"1-cdn-\u6027\u80fd\u76d1\u63a7",children:"1. CDN \u6027\u80fd\u76d1\u63a7"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u914d\u7f6e CDN \u5e73\u53f0\u63d0\u4f9b\u7684\u76d1\u63a7\u529f\u80fd"}),"\n",(0,l.jsx)(e.li,{children:"\u76d1\u63a7\u5173\u952e\u6307\u6807\uff1a\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u54cd\u5e94\u65f6\u95f4\u3001\u9519\u8bef\u7387"}),"\n",(0,l.jsx)(e.li,{children:"\u8bbe\u7f6e\u544a\u8b66\u673a\u5236"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"2-\u524d\u7aef\u6027\u80fd\u76d1\u63a7",children:"2. \u524d\u7aef\u6027\u80fd\u76d1\u63a7"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// \u4f7f\u7528 Performance API \u76d1\u63a7\u8d44\u6e90\u52a0\u8f7d\u6027\u80fd\nwindow.addEventListener('load', () => {\n  setTimeout(() => {\n    const perfData = window.performance.getEntriesByType('resource');\n    const cdnResources = perfData.filter(res => \n      res.name.includes('static.yourdomain.com')\n    );\n    \n    // \u5206\u6790\u5e76\u4e0a\u62a5\u6027\u80fd\u6570\u636e\n    const metrics = cdnResources.map(res => ({\n      url: res.name,\n      duration: res.duration,\n      size: res.transferSize,\n      timing: {\n        dns: res.domainLookupEnd - res.domainLookupStart,\n        tcp: res.connectEnd - res.connectStart,\n        ttfb: res.responseStart - res.requestStart,\n        download: res.responseEnd - res.responseStart,\n      }\n    }));\n    \n    // \u53d1\u9001\u5230\u5206\u6790\u670d\u52a1\u5668\n    navigator.sendBeacon('/analytics', JSON.stringify(metrics));\n  }, 0);\n});\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u516d\u5e38\u89c1\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848",children:"\u516d\u3001\u5e38\u89c1\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u8de8\u57df\u95ee\u9898",children:"1. \u8de8\u57df\u95ee\u9898"}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u4fdd CDN \u914d\u7f6e\u4e86\u6b63\u786e\u7684 CORS \u5934\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Access-Control-Allow-Origin: https://yourdomain.com\nAccess-Control-Allow-Methods: GET, OPTIONS\nAccess-Control-Max-Age: 86400\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u7f13\u5b58\u66f4\u65b0\u95ee\u9898",children:"2. \u7f13\u5b58\u66f4\u65b0\u95ee\u9898"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4f7f\u7528\u5185\u5bb9\u54c8\u5e0c\u547d\u540d\u6587\u4ef6\uff0c\u786e\u4fdd\u5185\u5bb9\u53d8\u66f4\u65f6\u6587\u4ef6\u540d\u4e5f\u53d8\u66f4"}),"\n",(0,l.jsx)(e.li,{children:"\u5bf9\u4e8e HTML \u6587\u4ef6\uff0c\u8bbe\u7f6e\u8f83\u77ed\u7684\u7f13\u5b58\u65f6\u95f4\u6216\u4e0d\u7f13\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"\u5b9e\u73b0\u7d27\u6025\u7f13\u5b58\u6e05\u9664\u673a\u5236"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"3-\u90e8\u7f72\u540c\u6b65\u95ee\u9898",children:"3. \u90e8\u7f72\u540c\u6b65\u95ee\u9898"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5148\u90e8\u7f72\u9759\u6001\u8d44\u6e90\u5230 CDN\uff0c\u518d\u90e8\u7f72\u5f15\u7528\u8fd9\u4e9b\u8d44\u6e90\u7684 HTML"}),"\n",(0,l.jsx)(e.li,{children:"\u5b9e\u73b0\u539f\u5b50\u5316\u90e8\u7f72\u6d41\u7a0b\uff0c\u907f\u514d\u8d44\u6e90\u4e0d\u4e00\u81f4"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4e03\u5b8c\u6574\u5b9e\u65bd\u6d41\u7a0b\u793a\u4f8b",children:"\u4e03\u3001\u5b8c\u6574\u5b9e\u65bd\u6d41\u7a0b\u793a\u4f8b"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u9879\u76ee\u914d\u7f6e\u793a\u4f8b",children:"1. \u9879\u76ee\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"// vue.config.js (Vue CLI \u9879\u76ee)\nmodule.exports = {\n  publicPath: process.env.NODE_ENV === 'production'\n    ? 'https://static.yourdomain.com/'\n    : '/',\n  chainWebpack: config => {\n    if (process.env.NODE_ENV === 'production') {\n      // \u4f18\u5316\u56fe\u7247\n      config.module\n        .rule('images')\n        .use('image-webpack-loader')\n        .loader('image-webpack-loader')\n        .options({\n          mozjpeg: { quality: 75 },\n          optipng: { enabled: true },\n          pngquant: { quality: [0.65, 0.9], speed: 4 },\n          gifsicle: { interlaced: false },\n        });\n    }\n  },\n  configureWebpack: {\n    output: {\n      // \u6dfb\u52a0\u5185\u5bb9\u54c8\u5e0c\u5230\u6587\u4ef6\u540d\n      filename: 'js/[name].[contenthash:8].js',\n      chunkFilename: 'js/[name].[contenthash:8].js'\n    }\n  }\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u90e8\u7f72\u811a\u672c\u793a\u4f8b",children:"2. \u90e8\u7f72\u811a\u672c\u793a\u4f8b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n# \u6784\u5efa\u9879\u76ee\nnpm run build\n\n# \u4e0a\u4f20\u5230 CDN (\u4f7f\u7528 AWS S3 \u793a\u4f8b)\naws s3 sync ./dist s3://your-bucket/static/ \\\n  --exclude "*.html" \\\n  --cache-control "public, max-age=31536000, immutable"\n\n# HTML \u6587\u4ef6\u4f7f\u7528\u4e0d\u540c\u7684\u7f13\u5b58\u7b56\u7565\naws s3 sync ./dist s3://your-bucket/static/ \\\n  --include "*.html" \\\n  --cache-control "public, max-age=3600"\n\n# \u5237\u65b0 CDN \u7f13\u5b58 (\u5982\u679c\u9700\u8981)\naws cloudfront create-invalidation --distribution-id YOUR_CF_DISTRIBUTION_ID --paths "/*"\n\n# \u90e8\u7f72\u540e\u7aef\u5e94\u7528\n# ...\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u524d\u7aef\u5f15\u7528\u793a\u4f8b",children:"3. \u524d\u7aef\u5f15\u7528\u793a\u4f8b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-jsx",children:"// React \u7ec4\u4ef6\u793a\u4f8b\nimport React from 'react';\n\n// \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u4e2d\u7684 CDN \u5730\u5740\nconst CDN_URL = process.env.REACT_APP_CDN_URL || '/';\n\nfunction MyComponent() {\n  return (\n    <div>\n      <img \n        src={`${CDN_URL}images/hero-banner.jpg`} \n        alt=\"Hero Banner\" \n        loading=\"lazy\"\n      />\n      {/* \u5176\u4ed6\u5185\u5bb9 */}\n    </div>\n  );\n}\n"})})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}}}]);