"use strict";(self.webpackChunklbt_docs=self.webpackChunklbt_docs||[]).push([[6377],{13309:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>t,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"DevOps/docker/docker-run\u547d\u4ee4\u8be6\u89e3","title":"docker-run\u547d\u4ee4\u8be6\u89e3","description":"docker run -e \u547d\u4ee4\u7528\u4e8e\u5728\u542f\u52a8\u5bb9\u5668\u65f6\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u8ba9\u60a8\u5728\u4e0d\u4fee\u6539\u955c\u50cf\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u5bb9\u5668\u914d\u7f6e\u4e0d\u540c\u7684\u8fd0\u884c\u73af\u5883\u3002","source":"@site/docs/DevOps/docker/docker-run\u547d\u4ee4\u8be6\u89e3.md","sourceDirName":"DevOps/docker","slug":"/DevOps/docker/docker-run\u547d\u4ee4\u8be6\u89e3","permalink":"/docs/DevOps/docker/docker-run\u547d\u4ee4\u8be6\u89e3","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"docker-run\u547d\u4ee4\u8be6\u89e3"},"sidebar":"tutorialSidebar","previous":{"title":"Docker \u5e38\u7528\u547d\u4ee4","permalink":"/docs/DevOps/docker/Docker\u5e38\u7528\u547d\u4ee4"},"next":{"title":"Docker\u4e2dVolume\u4f7f\u7528\u8bf4\u660e","permalink":"/docs/DevOps/docker/volume\u4f7f\u7528\u8bf4\u660e"}}');var l=r(74848),c=r(28453);const d={title:"docker-run\u547d\u4ee4\u8be6\u89e3"},i="Docker run -e \u547d\u4ee4\u8be6\u89e3",o={},a=[{value:"\u57fa\u672c\u8bed\u6cd5",id:"\u57fa\u672c\u8bed\u6cd5",level:2},{value:"\u7528\u6cd5\u793a\u4f8b",id:"\u7528\u6cd5\u793a\u4f8b",level:2},{value:"1. \u8bbe\u7f6e\u5355\u4e2a\u73af\u5883\u53d8\u91cf",id:"1-\u8bbe\u7f6e\u5355\u4e2a\u73af\u5883\u53d8\u91cf",level:3},{value:"2. \u4ece\u5bbf\u4e3b\u673a\u7ee7\u627f\u73af\u5883\u53d8\u91cf",id:"2-\u4ece\u5bbf\u4e3b\u673a\u7ee7\u627f\u73af\u5883\u53d8\u91cf",level:3},{value:"3. \u4ece\u6587\u4ef6\u8bfb\u53d6\u73af\u5883\u53d8\u91cf",id:"3-\u4ece\u6587\u4ef6\u8bfb\u53d6\u73af\u5883\u53d8\u91cf",level:3},{value:"4. \u5b9e\u9645\u5e94\u7528\u573a\u666f",id:"4-\u5b9e\u9645\u5e94\u7528\u573a\u666f",level:3},{value:"\u6570\u636e\u5e93\u914d\u7f6e",id:"\u6570\u636e\u5e93\u914d\u7f6e",level:4},{value:"Web \u5e94\u7528\u914d\u7f6e",id:"web-\u5e94\u7528\u914d\u7f6e",level:4},{value:"API \u5bc6\u94a5\u548c\u654f\u611f\u4fe1\u606f",id:"api-\u5bc6\u94a5\u548c\u654f\u611f\u4fe1\u606f",level:4},{value:"\u9ad8\u7ea7\u7528\u6cd5",id:"\u9ad8\u7ea7\u7528\u6cd5",level:2},{value:"1. \u5728 Docker Compose \u4e2d\u4f7f\u7528\u73af\u5883\u53d8\u91cf",id:"1-\u5728-docker-compose-\u4e2d\u4f7f\u7528\u73af\u5883\u53d8\u91cf",level:3},{value:"2. \u4e0e Kubernetes \u914d\u7f6e\u5bf9\u6bd4",id:"2-\u4e0e-kubernetes-\u914d\u7f6e\u5bf9\u6bd4",level:3},{value:"3. \u67e5\u770b\u5bb9\u5668\u73af\u5883\u53d8\u91cf",id:"3-\u67e5\u770b\u5bb9\u5668\u73af\u5883\u53d8\u91cf",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsxs)(n.h1,{id:"docker-run--e-\u547d\u4ee4\u8be6\u89e3",children:["Docker ",(0,l.jsx)(n.code,{children:"run -e"})," \u547d\u4ee4\u8be6\u89e3"]})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"docker run -e"})," \u547d\u4ee4\u7528\u4e8e\u5728\u542f\u52a8\u5bb9\u5668\u65f6\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u8ba9\u60a8\u5728\u4e0d\u4fee\u6539\u955c\u50cf\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u5bb9\u5668\u914d\u7f6e\u4e0d\u540c\u7684\u8fd0\u884c\u73af\u5883\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"\u57fa\u672c\u8bed\u6cd5",children:"\u57fa\u672c\u8bed\u6cd5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker run -e KEY=value ... \u955c\u50cf\u540d\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6216"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker run -e KEY ... \u955c\u50cf\u540d\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u7528\u6cd5\u793a\u4f8b",children:"\u7528\u6cd5\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"1-\u8bbe\u7f6e\u5355\u4e2a\u73af\u5883\u53d8\u91cf",children:"1. \u8bbe\u7f6e\u5355\u4e2a\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u8bbe\u7f6e\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\ndocker run -e DEBUG=true nginx\n\n# \u8bbe\u7f6e\u591a\u4e2a\u73af\u5883\u53d8\u91cf\ndocker run -e DEBUG=true -e APP_ENV=production nginx\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-\u4ece\u5bbf\u4e3b\u673a\u7ee7\u627f\u73af\u5883\u53d8\u91cf",children:"2. \u4ece\u5bbf\u4e3b\u673a\u7ee7\u627f\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u5047\u8bbe\u5bbf\u4e3b\u673a\u4e0a\u6709\u73af\u5883\u53d8\u91cf API_KEY\ndocker run -e API_KEY nginx\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u8fd9\u4f1a\u5c06\u5bbf\u4e3b\u673a\u4e0a\u7684 ",(0,l.jsx)(n.code,{children:"API_KEY"})," \u73af\u5883\u53d8\u91cf\u4f20\u9012\u7ed9\u5bb9\u5668\uff0c\u4fdd\u6301\u76f8\u540c\u7684\u503c\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"3-\u4ece\u6587\u4ef6\u8bfb\u53d6\u73af\u5883\u53d8\u91cf",children:"3. \u4ece\u6587\u4ef6\u8bfb\u53d6\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4ece\u6587\u4ef6\u8bfb\u53d6\u73af\u5883\u53d8\u91cf\ndocker run --env-file=./env.list nginx\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5176\u4e2d ",(0,l.jsx)(n.code,{children:"env.list"})," \u6587\u4ef6\u683c\u5f0f\u4e3a\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"# \u6ce8\u91ca\u884c\nKEY1=value1\nKEY2=value2\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-\u5b9e\u9645\u5e94\u7528\u573a\u666f",children:"4. \u5b9e\u9645\u5e94\u7528\u573a\u666f"}),"\n",(0,l.jsx)(n.h4,{id:"\u6570\u636e\u5e93\u914d\u7f6e",children:"\u6570\u636e\u5e93\u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u914d\u7f6e MySQL \u5bb9\u5668\ndocker run -e MYSQL_ROOT_PASSWORD=secret -e MYSQL_DATABASE=myapp mysql:8.0\n"})}),"\n",(0,l.jsx)(n.h4,{id:"web-\u5e94\u7528\u914d\u7f6e",children:"Web \u5e94\u7528\u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u914d\u7f6e Node.js \u5e94\u7528\ndocker run -e NODE_ENV=production -e PORT=3000 -e DB_HOST=mysql my-node-app\n"})}),"\n",(0,l.jsx)(n.h4,{id:"api-\u5bc6\u94a5\u548c\u654f\u611f\u4fe1\u606f",children:"API \u5bc6\u94a5\u548c\u654f\u611f\u4fe1\u606f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4f20\u9012 API \u5bc6\u94a5\ndocker run -e AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE -e AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY my-aws-app\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u9ad8\u7ea7\u7528\u6cd5",children:"\u9ad8\u7ea7\u7528\u6cd5"}),"\n",(0,l.jsx)(n.h3,{id:"1-\u5728-docker-compose-\u4e2d\u4f7f\u7528\u73af\u5883\u53d8\u91cf",children:"1. \u5728 Docker Compose \u4e2d\u4f7f\u7528\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.yml\nversion: '3'\nservices:\n  webapp:\n    image: my-webapp\n    environment:\n      - DEBUG=true\n      - API_URL=http://api:8000\n      - NODE_ENV=production\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6216\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6587\u4ef6\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.yml\nversion: '3'\nservices:\n  webapp:\n    image: my-webapp\n    env_file:\n      - ./common.env\n      - ./app.env\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-\u4e0e-kubernetes-\u914d\u7f6e\u5bf9\u6bd4",children:"2. \u4e0e Kubernetes \u914d\u7f6e\u5bf9\u6bd4"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 Kubernetes \u4e2d\uff0c\u73af\u5883\u53d8\u91cf\u53ef\u4ee5\u901a\u8fc7 Pod \u89c4\u8303\u8bbe\u7f6e\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-app\nspec:\n  containers:\n  - name: my-app\n    image: my-app:1.0\n    env:\n    - name: DEBUG\n      value: "true"\n    - name: API_URL\n      value: "http://api-service:8000"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"3-\u67e5\u770b\u5bb9\u5668\u73af\u5883\u53d8\u91cf",children:"3. \u67e5\u770b\u5bb9\u5668\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.p,{children:"\u542f\u52a8\u5bb9\u5668\u540e\uff0c\u60a8\u53ef\u4ee5\u67e5\u770b\u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u6240\u6709\u73af\u5883\u53d8\u91cf\ndocker exec my-container env\n\n# \u67e5\u770b\u7279\u5b9a\u73af\u5883\u53d8\u91cf\ndocker exec my-container printenv NODE_ENV\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u654f\u611f\u4fe1\u606f\u5904\u7406"}),"\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u907f\u514d\u5728 Dockerfile \u4e2d\u786c\u7f16\u7801\u654f\u611f\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"-e"})," \u6216 ",(0,l.jsx)(n.code,{children:"--env-file"})," \u5728\u8fd0\u884c\u65f6\u4f20\u9012\u654f\u611f\u4fe1\u606f"]}),"\n",(0,l.jsx)(n.li,{children:"\u8003\u8651\u4f7f\u7528 Docker Secrets \u6216\u5176\u4ed6\u5bc6\u94a5\u7ba1\u7406\u5de5\u5177"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u9ed8\u8ba4\u503c\u8bbe\u7f6e"}),"\uff1a\n\u5728 Dockerfile \u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u8fd0\u884c\u65f6\u53ef\u8986\u76d6\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dockerfile",children:"ENV NODE_ENV=development\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u73af\u5883\u53d8\u91cf\u547d\u540d"}),"\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\u548c\u4e0b\u5212\u7ebf"}),"\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528\u6709\u610f\u4e49\u7684\u524d\u7f00\u5206\u7ec4\u76f8\u5173\u53d8\u91cf"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6587\u6863\u5316"}),"\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bb0\u5f55\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u7684\u6240\u6709\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.li,{children:"\u63d0\u4f9b\u793a\u4f8b\u503c\u548c\u8bf4\u660e"}),"\n"]}),"\n"]}),"\n"]})]})}function t(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>i});var s=r(96540);const l={},c=s.createContext(l);function d(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);